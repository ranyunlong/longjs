webpackJsonp([1],{"1R2i":function(t,e){t.exports=iview},JVSv:function(t,e){},Mw1A:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("lRwf"),a=r.n(n),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=r("VU/8")({name:"App"},o,!1,function(t){r("JVSv")},null,null).exports,i=r("pRNm"),c=r.n(i),u=r("Dd8w"),l=r.n(u),m=r("SJI6"),p=r.n(m),d={props:{logo:{type:String,default:"后台管理系统"},dropdownMenu:Array,avatar:String},methods:l()({},Object(m.mapMutations)([])),computed:l()({},Object(m.mapGetters)(["user"]))},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Header",{staticClass:"header"},[r("div",{staticClass:"logo"},[r("router-link",{attrs:{to:"/"}},[t._v(" "+t._s(t.logo))])],1),t._v(" "),r("div",{staticClass:"user-bar"},[r("Avatar",{attrs:{src:t.avatar,icon:"ios-person",size:"small"}}),t._v(" "),t.user?r("span",[t._v("欢迎您,\n            "),r("Dropdown",{attrs:{trigger:"click"},on:{"on-click":function(e){t.$emit("click")}}},[r("a",[t._v(t._s(t.user.username)),r("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.dropdownMenu,function(e,n){return r("DropdownItem",{key:n,attrs:{name:e.name}},[e.icon?r("Icon",{attrs:{type:e.icon}}):t._e(),t._v("\n                        "+t._s(e.name)+"\n                    ")],1)}))],1)],1):t._e(),t._v(" "),t.user?t._e():r("span",[t._v("请登录后在来 \n            "),r("Button",{on:{click:function(e){t.$router.push("/login")}}},[t._v("登录")])],1)],1)])},staticRenderFns:[]};var v=r("VU/8")(d,f,!1,function(t){r("lwPJ")},"data-v-5839e99b",null).exports,h={props:{data:Array}},_={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Sider",{staticClass:"page-menu"},[r("Menu",{attrs:{width:"200"}},t._l(t.data,function(e,n){return r("Submenu",{key:n,attrs:{name:n}},[r("template",{slot:"title"},[e.icon?r("Icon",{attrs:{type:e.icon}}):t._e(),t._v("\n                "+t._s(e.name)+"\n            ")],1),t._v(" "),t._l(e.children,function(e,a){return r("menu-item",{key:a,attrs:{to:e.to,name:n+"-"+a}},[e.icon?r("Icon",{attrs:{type:e.icon}}):t._e(),t._v("\n                "+t._s(e.name)+"\n            ")],1)})],2)}))],1)},staticRenderFns:[]};var g={data:function(){return{dropdownMenu:[{name:"修改密码",icon:"md-unlock"},{name:"安全退出",icon:"md-log-out"}],pageMenu:[{name:"内容管理",icon:"ios-appstore-outline",children:[{name:"文章管理",icon:"ios-apps",to:"/articles"},{name:"评论管理",icon:"ios-aperture",to:"/comment"},{name:"举报管理",icon:"ios-aperture",to:"/110"}]}]}},components:{PageHeader:v,PageMenu:r("VU/8")(h,_,!1,function(t){r("jVvI")},null,null).exports},methods:l()({},Object(m.mapMutations)(["LOG_OUT"]),{select:function(){this.LOG_OUT(),this.$router.push("/login")}})},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("Layout",{staticClass:"page-admin"},[e("PageHeader",{attrs:{user:"管理员",avatar:"https://i.loli.net/2017/08/21/599a521472424.jpg","dropdown-menu":this.dropdownMenu},on:{click:this.select}}),this._v(" "),e("Layout",{staticClass:"content"},[e("PageMenu",{attrs:{data:this.pageMenu}}),this._v(" "),e("Content",{staticClass:"router-view"},[e("router-view")],1)],1)],1)},staticRenderFns:[]};var y=r("VU/8")(g,w,!1,function(t){r("hW5G")},"data-v-2f8e8974",null).exports,b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Breadcrumb",{staticClass:"bread-crumb"},[e("BreadcrumbItem",{attrs:{to:"/"}},[this._v("首页")]),this._v(" "),e("BreadcrumbItem",[this._v("欢迎页面")])],1),this._v(" "),e("h1",[this._v("欢迎界面")])],1)},staticRenderFns:[]};var x=r("VU/8")({},b,!1,function(t){r("opBH")},"data-v-1ddb9df2",null).exports,I=r("BO1k"),A=r.n(I),k=r("mtWM"),C=r.n(k),E={created:function(){var t=this;this.getUsers({page:this.page,limit:this.limit}).then(function(e){var r=e.data,n=e.total;t.data=r,t.total=n})},watch:{current:function(t){var e=this;this.getUsers({page:this.page,limit:this.limit}).then(function(t){var r=t.data,n=t.total;e.data=r,e.total=n})}},data:function(){return{loading:!1,total:0,current:1,limit:10,columns:[{type:"selection",width:50},{title:"#ID",width:150,align:"center",sortable:!0,key:"id"},{title:"用户名",align:"center",sortable:!0,key:"name"},{title:"年龄",align:"center",sortable:!0,key:"age"},{title:"地址",align:"center",key:"address"}],data:[],deleteAllData:[]}},methods:l()({delectAll:function(){var t=this,e=this.data.filter(function(e){var r=!0,n=!1,a=void 0;try{for(var o,s=A()(t.deleteAllData);!(r=(o=s.next()).done);r=!0){return o.value.id===e.id}}catch(t){n=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}});this.data=e},selectAll:function(t){this.deleteAllData=t}},Object(m.mapActions)(["getUsers"]))},F={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page"},[r("Breadcrumb",{staticClass:"bread-crumb"},[r("BreadcrumbItem",{attrs:{to:"/"}},[t._v("首页")]),t._v(" "),r("BreadcrumbItem",[t._v("文章管理")])],1),t._v(" "),r("div",{staticClass:"search"},[r("Input",{staticStyle:{width:"auto"},attrs:{suffix:"ios-search",size:"small",placeholder:"搜索点什么"}})],1),t._v(" "),r("div",{staticClass:"table"},[r("Table",{attrs:{loading:t.loading,stripe:"",border:"",size:"small",columns:t.columns,data:t.data},on:{"on-select-all":t.selectAll}})],1),t._v(" "),r("div",{staticClass:"bar"},[r("div",{staticClass:"buttons"},[r("Button",{attrs:{type:"primary"}},[t._v("全选")]),t._v(" "),r("Button",{attrs:{type:"error"},on:{click:t.delectAll}},[t._v("批量删除")])],1),t._v(" "),r("Page",{attrs:{current:t.current,total:t.total,size:"small","show-sizer":""},on:{"update:current":function(e){t.current=e}}})],1)],1)},staticRenderFns:[]};var $=r("VU/8")(E,F,!1,function(t){r("Mw1A")},"data-v-0871aa35",null).exports,M=r("fZjL"),R=r.n(M),S={data:function(){return{form:{account:"zhangsan",password:"123456"},error:{account:"",password:""}}},methods:l()({},Object(m.mapActions)(["login"]),{log:function(){var t=this;this.login(this.form).then(function(e){var r=e.data,n=r.code,a=r.err;r.reulst;n?t.$router.push("/admin"):R()(a).forEach(function(e){t.error[e]=a[e]})})}})},G={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Layout",{staticClass:"layout"},[r("div",{staticClass:"login-box"},[r("h2",[t._v("登录")]),t._v(" "),r("Form",{attrs:{autocomplete:"off"}},[r("FormItem",{attrs:{error:t.error.account}},[r("Input",{attrs:{type:"text",autocomplete:"off",prefix:"md-person",placeholder:"请输入用户名"},on:{input:function(e){t.error.account=""}},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),t._v(" "),r("FormItem",{attrs:{error:t.error.password}},[r("Input",{attrs:{type:"password",autocomplete:"off",prefix:"md-lock",placeholder:"请输入密码"},on:{input:function(e){t.error.password=""}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",long:""},on:{click:t.log}},[t._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var U=r("VU/8")(S,G,!1,function(t){r("iBK2")},"data-v-6df16c90",null).exports,H={data:function(){return{code:"/api/captcha.svg?"+1e3*Math.random(),form:{username:"",password:"",email:"",phone:"",verifiy:""},error:{username:"",password:"",email:"",phone:"",verifiy:""}}},methods:{reload:function(t){this.code="/api/captcha.svg?"+t.timeStamp},register:function(){var t=this;C.a.post("/api/register",this.form).then(function(e){var r=e.data,n=r.code,a=r.err;0===n?R()(a).forEach(function(e){t.error[e]=a[e]}):t.$router.push("/login")}).catch(function(t){console.log(t)})}}},B={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Layout",{staticClass:"layout"},[r("div",{staticClass:"login-box"},[r("h2",[t._v("注册")]),t._v(" "),r("Form",{attrs:{autocomplete:"off"}},[r("FormItem",{attrs:{error:t.error.username}},[r("Input",{attrs:{type:"text",autocomplete:"off",prefix:"md-person",placeholder:"请输入用户名"},on:{input:function(e){t.error.username=""}},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),r("FormItem",{attrs:{error:t.error.email}},[r("Input",{attrs:{type:"email",autocomplete:"off",prefix:"md-person",placeholder:"请输入邮箱"},on:{input:function(e){t.error.email=""}},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),r("FormItem",{attrs:{error:t.error.phone}},[r("Input",{attrs:{type:"text",autocomplete:"off",prefix:"md-person",placeholder:"请输入手机号码"},on:{input:function(e){t.error.phone=""}},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),r("FormItem",{attrs:{error:t.error.verifiy}},[r("Input",{attrs:{type:"text",autocomplete:"off",prefix:"md-person",placeholder:"验证码"},on:{input:function(e){t.error.verifiy=""}},model:{value:t.form.verifiy,callback:function(e){t.$set(t.form,"verifiy",e)},expression:"form.verifiy"}}),t._v(" "),r("img",{attrs:{src:t.code},on:{click:t.reload}})],1),t._v(" "),r("FormItem",{attrs:{error:t.error.password}},[r("Input",{attrs:{type:"password",autocomplete:"off",prefix:"md-lock",placeholder:"请输入密码"},on:{input:function(e){t.error.password=""}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",long:""},on:{click:t.register}},[t._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var V=r("VU/8")(H,B,!1,function(t){r("T7lF")},"data-v-2d178c56",null).exports,N=Object(m.createNamespacedHelpers)("users"),O=N.mapGetters,j=(N.mapActions,N.mapMutations),L={computed:l()({},O(["user","age"])),methods:l()({},j(["CHANGE_AGE"]))},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._v("\n    "+this._s(this.user)+" "+this._s(this.age)+"\n\n    "),e("button",{on:{click:this.CHANGE_AGE}},[this._v("CHANGE_AGE")])])},staticRenderFns:[]};var J=r("VU/8")(L,D,!1,function(t){r("dNa4")},"data-v-4cda012a",null).exports;a.a.use(c.a);var P=new c.a({routes:[{path:"/",name:"Index",component:J},{path:"/admin",component:y,meta:{auth:!0},children:[{path:"/",name:"AdminHome",component:x,meta:{auth:!0}},{path:"/articles",name:"AdminArticleManager",component:$,meta:{auth:!0}}]},{path:"/login",name:"Login",component:U},{path:"/reg",name:"Regsiter",component:V}]}),T=r("//Fk"),z=r.n(T),W=r("mvHQ"),K=r.n(W),Q={namespaced:!0,state:{time:(new Date).toLocaleString()},actions:{},getters:{time:function(t){return t.time}},mutations:{CHANGE_TIME:function(t){t.time=(new Date).toLocaleString()}}},Z={namespaced:!0,state:{user:"李四",age:10},actions:{},getters:{user:function(t){return t.user},age:function(t){return t.age}},mutations:{CHANGE_AGE:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.age=23}}},q="";console.log("production"),a.a.use(p.a);var X=JSON.parse(unescape(sessionStorage.getItem("user")))||null,Y=new p.a.Store({modules:{users:Z,members:Q},state:{user:X},getters:{user:function(t){return t.user}},mutations:{CHANGE_USER:function(t,e){sessionStorage.setItem("user",escape(K()(e))),t.user=e},LOG_OUT:function(t){sessionStorage.removeItem("user"),t.user=null}},actions:{getUsers:function(t,e){t.commit;var r=e.page,n=e.limit;return new z.a(function(t,e){C.a.get(q+"/getmembers",{params:{page:r,limit:n}}).then(function(e){var r=e.data,n=(e.total,r.data.map(function(t){return t.id=t.iid,t}));e.data.data=n,t(e.data)}).catch(function(t){return e(t)})})},login:function(t,e){var r=t.commit;return new z.a(function(t,n){C.a.post(q+"/login",e).then(function(e){1===e.data.code&&r("CHANGE_USER",e.data.reulst),t(e)}).catch(function(t){return n(t)})})}}}),tt=r("1R2i"),et=r.n(tt);a.a.use(et.a),a.a.config.productionTip=!1,P.beforeEach(function(t,e,r){t.meta.auth?Y.getters.user?r():r("/login"):r()}),new a.a({el:"#app",router:P,store:Y,components:{App:s},template:"<App/>"})},SJI6:function(t,e){t.exports=Vuex},T7lF:function(t,e){},dNa4:function(t,e){},hW5G:function(t,e){},iBK2:function(t,e){},jVvI:function(t,e){},lRwf:function(t,e){t.exports=Vue},lwPJ:function(t,e){},opBH:function(t,e){},pRNm:function(t,e){t.exports=VueRouter}},["NHnr"]);
//# sourceMappingURL=app.a4900028f930f24d7ab7.js.map